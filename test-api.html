<!DOCTYPE html>
<html>
<head>
    <title>NeurallEmpire API Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-box {
            border: 2px solid #ddd;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .success { border-color: #10b981; background: #d1fae5; }
        .error { border-color: #ef4444; background: #fee2e2; }
        .loading { border-color: #3b82f6; background: #dbeafe; }
        button {
            background: #3b82f6;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover { background: #2563eb; }
        pre {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üß™ NeurallEmpire API Test</h1>
    
    <div class="test-box loading" id="status">
        <h3>Status: Testing...</h3>
        <p>Click the button below to test the backend API</p>
    </div>

    <button onclick="testAPI()">Test Backend Connection</button>

    <div class="test-box" id="results" style="display:none;">
        <h3>Results:</h3>
        <pre id="output"></pre>
    </div>

    <script>
        async function testAPI() {
            const statusBox = document.getElementById('status');
            const resultsBox = document.getElementById('results');
            const output = document.getElementById('output');
            
            statusBox.className = 'test-box loading';
            statusBox.innerHTML = '<h3>Testing...</h3><p>Connecting to backend...</p>';
            resultsBox.style.display = 'none';
            
            try {
                // Test 1: Health Check
                console.log('Testing health endpoint...');
                const healthResponse = await fetch('http://localhost:3001/health');
                const healthData = await healthResponse.json();
                
                // Test 2: Check CORS
                console.log('Testing CORS...');
                const corsTest = healthResponse.headers.get('access-control-allow-origin');
                
                // Success!
                statusBox.className = 'test-box success';
                statusBox.innerHTML = '<h3>‚úÖ Backend is Working!</h3><p>All tests passed</p>';
                
                resultsBox.style.display = 'block';
                output.textContent = JSON.stringify({
                    health: healthData,
                    cors: corsTest || 'Configured',
                    frontend: 'http://localhost:3000',
                    backend: 'http://localhost:3001',
                    status: 'CONNECTED'
                }, null, 2);
                
            } catch (error) {
                statusBox.className = 'test-box error';
                statusBox.innerHTML = '<h3>‚ùå Connection Failed</h3><p>' + error.message + '</p>';
                
                resultsBox.style.display = 'block';
                output.textContent = 'Error: ' + error.message + '\n\nMake sure the backend is running on port 3001';
            }
        }
        
        // Auto-test on load
        window.onload = () => {
            setTimeout(testAPI, 500);
        };
    </script>
</body>
</html>
